---
/**
 * Simple Header - For SimpleLayout (Homepage/Blog)
 *
 * Standalone header with logo, search, theme switcher, and navigation
 */
import Search from 'virtual:starlight/components/Search'
import SimpleThemeSelect from './SimpleThemeSelect.astro'
import type { Props } from '@astrojs/starlight/props'
import logoDark from '../assets/logo-dark.svg'
import logoLight from '../assets/logo.svg'

// Create minimal props for Starlight components
const componentProps: Partial<Props> = {
  ...Astro.props,
  hasSidebar: false,
  toc: undefined,
  entry: {
    data: {
      title: 'Cortex TMS',
      description: 'AI-powered project scaffolding',
    },
    slug: '',
  } as any,
  entryMeta: {
    lang: 'en',
    dir: 'ltr',
    locale: 'en',
  },
  lang: 'en',
  dir: 'ltr',
  sidebar: [],
  siteTitle: 'Cortex TMS',
  siteTitleHref: '/',
}
---

<header class='simple-site-header'>
  <div class='header-container'>
    <div class='header-content sl-flex'>
      {/* Site Title/Logo */}
      <div class='title-wrapper sl-flex'>
        <a
          href='/'
          class='site-title'
        >
          <img
            src={logoDark.src}
            alt='Cortex TMS Logo'
            class='logo-image logo-dark'
            width='32'
            height='32'
          />
          <img
            src={logoLight.src}
            alt='Cortex TMS Logo'
            class='logo-image logo-light'
            width='32'
            height='32'
          />
          <span class='logo-text'>Cortex TMS</span>
        </a>
      </div>

      {/* Search */}
      <div class='sl-flex search-wrapper print:hidden'>
        <Search {...componentProps} />
      </div>

      {/* Right Group: Navigation + Theme + Social */}
      <div class='right-group sl-flex print:hidden'>
        {/* Navigation Links */}
        <nav class='main-nav sl-flex'>
          <a
            href='/blog/'
            class='nav-link'
          >
            Blog
            <span class='badge'>New</span>
          </a>
          <a
            href='/getting-started/introduction/'
            class='nav-link'
            >Docs</a
          >
        </nav>

        {/* Social Icons */}
        <div class='social-icons sl-flex'>
          <a
            href='https://github.com/cortex-tms/cortex-tms'
            class='nav-link'
            target='_blank'
            rel='noopener'
            aria-label='GitHub'
          >
            <svg
              aria-hidden='true'
              width='16'
              height='16'
              viewBox='0 0 24 24'
              fill='currentColor'
            >
              <path
                d='M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.07 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3'
              ></path>
            </svg>
          </a>
        </div>

        {/* Theme Selector */}
        <SimpleThemeSelect />
      </div>
    </div>
  </div>
</header>

<style>
  .simple-site-header {
    --simple-header-bg: var(--sl-color-bg-nav, rgba(17, 17, 17, 0.86));
    --simple-header-shadow: 0 12px 30px rgba(0, 0, 0, 0.22);
    --simple-header-border: var(--sl-color-hairline, rgba(255, 255, 255, 0.08));

    background: var(--simple-header-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 0px solid var(--simple-header-border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    height: var(--sl-nav-height, 4rem);
    box-shadow: var(--simple-header-shadow);
  }

  .header-container {
    max-width: 1280px;
    margin: 0 auto;
    height: 100%;
    padding: var(--sl-nav-pad-y, 0.75rem) var(--sl-nav-pad-x, 1.5rem);
  }

  .header-content {
    gap: var(--sl-nav-gap, 1rem);
    justify-content: space-between;
    align-items: center;
    height: 100%;
    display: flex;
    flex-wrap: nowrap;
  }

  .title-wrapper {
    overflow: clip;
    padding: 0.25rem;
    margin: -0.25rem;
    min-width: 0;
  }

  .site-title {
    font-size: var(--sl-text-xl);
    font-weight: 600;
    color: var(--sl-color-text);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    transition: color 0.2s;
  }

  .site-title:hover {
    color: var(--sl-color-accent-high);
  }

  .logo-image {
    width: 2rem;
    height: 2rem;
    flex-shrink: 0;
    display: none;
  }

  .logo-dark {
    display: block;
  }

  :root[data-theme='light'] .logo-dark {
    display: none;
  }

  :root[data-theme='light'] .logo-light {
    display: block;
  }

  .logo-text {
    background: linear-gradient(
      135deg,
      var(--sl-color-text),
      var(--sl-color-accent-high)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    white-space: nowrap;
  }

  .search-wrapper {
    flex: 1;
    max-width: 600px;
  }

  .right-group {
    gap: 1rem;
    align-items: center;
    display: flex;
  }

  .main-nav {
    gap: 1.5rem;
    align-items: center;
    display: flex;
  }

  .social-icons {
    gap: 1rem;
    align-items: center;
    display: flex;
  }

  .social-icons::after {
    content: '';
    height: 2rem;
    border-inline-end: 1px solid var(--sl-color-hairline);
  }

  .nav-link {
    color: var(--sl-color-gray-2);
    text-decoration: none;
    font-weight: 500;
    font-size: var(--sl-text-base);
    line-height: 1.1;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    white-space: nowrap;
  }

  .nav-link:hover {
    color: var(--sl-color-white);
  }

  :root[data-theme='light'] .nav-link:hover {
    color: var(--sl-color-black);
  }

  .badge {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 0.125rem 0.375rem;
    background: var(--sl-color-accent);
    color: var(--sl-color-black);
    border-radius: 0.25rem;
  }

  .nav-link svg {
    width: 1.25rem;
    height: 1.25rem;
    flex-shrink: 0;
  }

  /* Responsive - hide some elements on mobile */
  @media (max-width: 768px) {
    .logo-text {
      display: none;
    }

    .main-nav {
      gap: 0.75rem;
    }

    .right-group {
      gap: 0.5rem;
    }
  }

  @media (max-width: 480px) {
    .search-wrapper {
      display: none;
    }

    .badge {
      display: none;
    }
  }

  /* Keep flex layout across breakpoints for consistent vertical centering */

  :root[data-theme='light'] .simple-site-header {
    --simple-header-shadow: 0 12px 28px rgba(17, 17, 17, 0.12);
    --simple-header-border: rgba(0, 0, 0, 0.08);
  }

  /* Light mode search input fixes */
  :root[data-theme='light']
    .simple-site-header
    :global(site-search button[data-open-modal]) {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: var(--sl-color-gray-2);
  }

  :root[data-theme='light']
    .simple-site-header
    :global(site-search button[data-open-modal]:hover) {
    background: rgba(0, 0, 0, 0.08);
    border-color: rgba(0, 0, 0, 0.15);
  }

  :root[data-theme='light']
    .simple-site-header
    :global(site-search .search-input) {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: var(--sl-color-text);
  }
</style>
