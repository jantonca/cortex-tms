---
/**
 * BlogPostCard - Matches FeaturedBlogPost styling for consistency
 */
import GlassPanel from './GlassPanel.astro'
import GlassButton from './GlassButton.astro'
import { Calendar, Clock } from '@lucide/astro'
import '../styles/featured-blog.css'

interface Props {
  title: string
  excerpt: string
  heroImage?: string
  category?: string
  pubDate?: Date
  slug: string
  tags?: string[]
  body?: string
}

const {
  title,
  excerpt,
  heroImage,
  category,
  pubDate,
  slug,
  tags = [],
  body = '',
} = Astro.props

// Calculate reading time (rough estimate: 200 words per minute)
const wordsPerMinute = 200
const wordCount = body ? body.split(/\s+/).length : excerpt.split(/\s+/).length
const readingTime = Math.ceil(wordCount / wordsPerMinute)

// Format date
const formattedDate = pubDate
  ? pubDate.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : undefined
---

<GlassPanel variant="bordered" liquidBlob class="featured-blog-post blog-card">
  <a href={`/blog/${slug}/`} class="card-overlay" aria-label={title}></a>
  {heroImage && (
    <div class="post-image-wrapper">
      <img
        src={heroImage}
        alt={title}
        loading="lazy"
      />
    </div>
  )}
  <div class="panel-content">
    <div class="post-header">
      {tags && tags.length > 0 && (
        <div class="post-tags-top">
          {tags.slice(0, 3).map((tag) => (
            <span class="tag">{tag}</span>
          ))}
        </div>
      )}
      <h3 class="post-title">{title}</h3>
      <div class="post-meta">
        {formattedDate && (
          <div class="meta-item">
            <Calendar size={16} />
            <span>{formattedDate}</span>
          </div>
        )}
        <div class="meta-item">
          <Clock size={16} />
          <span>{readingTime} min read</span>
        </div>
      </div>
      <p class="post-description">{excerpt}</p>
    </div>

    <div class="post-footer">
      <div class="post-actions">
        <GlassButton
          variant="neon"
          href={`/blog/${slug}/`}
        >
          Read Article â†’
        </GlassButton>
      </div>
    </div>
  </div>
</GlassPanel>
