---
/**
 * BlogPostCard - Editorial glass card for blog posts
 *
 * A visually striking blog post preview card with:
 * - Featured image with gradient overlay
 * - Category tag
 * - Title and excerpt
 * - Read more link
 * - Hover effects (lift + image scale)
 *
 * Usage:
 * <BlogPostCard
 *   title="Post Title"
 *   excerpt="Post excerpt..."
 *   heroImage="/images/post.jpg"
 *   category="Tutorial"
 *   slug="post-slug"
 * />
 */

interface Props {
  /** Post title */
  title: string
  /** Post excerpt/description */
  excerpt: string
  /** Featured image URL */
  heroImage?: string
  /** Primary category/tag */
  category?: string
  /** Publication date */
  pubDate?: Date
  /** Post slug for link */
  slug: string
  /** Additional CSS classes */
  class?: string
}

const {
  title,
  excerpt,
  heroImage,
  category,
  pubDate,
  slug,
  class: className = '',
} = Astro.props

// Default image if none provided
const imageSrc = heroImage || '/images/blog/default-hero.webp'

// Format date
const formattedDate = pubDate
  ? new Intl.DateTimeFormat('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    }).format(pubDate)
  : undefined
---

<a
  href={`/blog/${slug}/`}
  class='post-card-link'
>
  <article
    class={`glass-panel post-card ${className}`}
    data-tilt
  >
    <div class='sheen'></div>

    {/* Featured image */}
    <div class='post-image-wrapper'>
      <img
        src={imageSrc}
        alt={title}
        loading='lazy'
      />
    </div>

    {/* Content */}
    <div class='post-content'>
      {category && <span class='category-tag'>{category}</span>}
      
      {formattedDate && <time class='post-date'>{formattedDate}</time>}

      <h2 class='post-title'>{title}</h2>

      <p class='post-excerpt'>{excerpt}</p>

      <span class='read-more'> Read Article â†’ </span>
    </div>
  </article>
</a>
